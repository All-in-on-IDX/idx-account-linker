(this["webpackJsonpidx-account-linker"]=this["webpackJsonpidx-account-linker"]||[]).push([[0],{1056:function(e,t){},1120:function(e,t){},1172:function(e,t){},1431:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(102),s=n.n(a),i=(n(620),n(70)),o=n(24),u=n(3),d=n.n(u),j=n(148),l=n(588),b=n.n(l),f=n(241),O=n.n(f),h=n(591),p=n.n(h),x=n(346),m=n(1458),g=n(608),v=n(1436),k=n(350),w=n(1459),y=n(1450),C=n(594),S=n.n(C),P=n(56),D=n(16),E=Object(i.b)((function(e){return{address:e.address,did:e.did}}))((function(e){var t=e.address,n=e.setCeramic,r=e.did,a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],u=s[1],l={walletconnect:{package:p.a,options:{infuraId:"24eb2385c3514f3d98191ad5e4c903e7"}}},h=new O.a({cacheProvider:!0,providerOptions:l});console.info(Object(f.getInjectedProvider)());var C=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(P.b)(),Object(P.a)(),h.clearCachedProvider(),!(null===i||void 0===i||null===(t=i.currentProvider)||void 0===t?void 0:t.disconnect)){e.next=6;break}return e.next=6,i.currentProvider.disconnect();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(d.a.mark((function e(){var t,c,r,a,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.connect();case 3:return t=e.sent,c=new b.a(t),u(c),e.next=8,c.eth.getAccounts();case 8:return r=e.sent,a=r[0],Object(P.a)(a),s=new x.ThreeIdConnect,e.next=14,s.connect(new x.EthereumAuthProvider(t,a));case 14:return i=new S.a("https://ceramic-clay.3boxlabs.com"),e.next=17,i.setDIDProvider(s.getDidProvider());case 17:n(i),Object(P.b)(i.did.id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error(e.t0),C();case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r||"injected"!==h.cachedProvider){e.next=3;break}return e.next=3,E();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return I()}),[]),t?Object(D.jsxs)(m.a,{align:"center",children:[Object(D.jsxs)(g.a,{children:["Using:",Object(D.jsx)("span",{children:" "}),Object(D.jsxs)("span",{title:t,children:[t.slice(0,10),"\u2026",t.slice(-5)]}),Object(D.jsx)("span",{children:" "}),Object(D.jsx)(y.a,{onClick:C})]}),!r&&Object(D.jsx)(v.a,{})]}):Object(D.jsx)(k.a,{align:"center",children:Object(D.jsx)(w.a,{onClick:E,children:"Connect Your Wallet"})})})),I=n(1451),J=n(1452),F=n(1457),z=Object(i.b)((function(e){return{username:e.username}}))((function(e){var t=e.username,n=Object(c.useState)(t),r=Object(o.a)(n,2),a=r[0],s=r[1];if(t)return Object(D.jsx)(k.a,{children:Object(D.jsx)(I.a,{children:Object(D.jsxs)(g.a,{children:["Checking: ",t,Object(D.jsx)("span",{children:" "}),Object(D.jsx)(y.a,{onClick:function(){return Object(P.e)()}})]})})});return Object(D.jsx)(k.a,{children:Object(D.jsxs)(m.a,{align:"center",children:[Object(D.jsxs)(g.a,{children:["\xbfWhat's your",Object(D.jsx)("span",{children:" "}),Object(D.jsx)(J.a,{target:"_blank",href:"//github.com",children:"Github"}),Object(D.jsx)("span",{children:" "}),"username?"]}),Object(D.jsx)(k.a,{as:"form",onSubmit:function(e){e.preventDefault(),Object(P.e)(a)},children:Object(D.jsx)(F.a,{textAlign:"center",value:a,onChange:function(e){return s(e.target.value)}})})]})})})),A=n(1453),N=n(1456),U=n(1454),B=Object(i.b)((function(e){return{did:e.did,username:e.username,pasted:e.pasted,failed:e.failed}}))((function(e){var t=e.did,n=e.username,c=e.pasted,r=e.failed,a=Object(A.a)(t).onCopy,s=Object(N.a)();return Object(D.jsx)(k.a,{children:Object(D.jsxs)(m.a,{align:"center",children:[Object(D.jsxs)(g.a,{children:["Copy your DID to a",Object(D.jsx)("span",{children:" "}),Object(D.jsx)(J.a,{target:"_blank",href:"//gist.github.com/".concat(n),children:"gist"}),"."]}),Object(D.jsxs)(g.a,{children:[Object(D.jsxs)("span",{title:t,children:[t.slice(0,10),"\u2026",t.slice(-5)]}),Object(D.jsx)("span",{children:" "}),Object(D.jsx)(U.a,{title:"copy",onClick:function(){a(),s({title:"Copied",status:"success",duration:2e3,isClosable:!0})}})]}),(!c||r)&&Object(D.jsx)(w.a,{onClick:function(){Object(P.d)(!0),Object(P.c)(!1)},background:"green.100",children:"\u2714 Gist Created"})]})})})),T=n(603),W=n(48),G=n(600),L=n(1455),V=Object(i.b)((function(e){return{address:e.address,username:e.username,did:e.did,pasted:e.pasted}}))((function(e){e.address;var t=e.username,n=e.did,r=e.pasted,a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],u=s[1],d=[];return d.push(Object(c.createElement)(E,{setCeramic:u,key:1})),n&&(d.push(Object(D.jsx)(z,{},2)),t&&(d.push(Object(D.jsx)(B,{},3)),r&&d.push(Object(c.createElement)(T.a,{ceramic:i,key:4})))),Object(D.jsxs)(W.c,{theme:G.theme,children:[Object(D.jsx)(L.a,{}),Object(D.jsx)(m.a,{align:"center",spacing:5,children:d})]})})),_=function(){return Object(D.jsx)(i.a,{store:P.f,children:Object(D.jsx)(V,{})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1460)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(_,{})}),document.getElementById("root")),q()},56:function(e,t,n){"use strict";n.d(t,"f",(function(){return s})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return j}));var c=n(44),r=n(349),a=Object(r.b)({name:"page",initialState:{pasted:!1,failed:!1},reducers:{nextPage:function(e){return Object(c.a)(Object(c.a)({},e),{},{step:e.step+1})},lastPage:function(e){return Object(c.a)(Object(c.a)({},e),{},{step:e.step+1})},setAddress:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{address:t.payload})},setUsername:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{username:t.payload})},setDID:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{did:t.payload})},setPasted:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{pasted:t.payload})},setFailed:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{failed:t.payload})}}}),s=Object(r.a)({reducer:a.reducer}),i=function(e){return s.dispatch(a.actions.setAddress(e))},o=function(e){return s.dispatch(a.actions.setUsername(e))},u=function(e){return s.dispatch(a.actions.setDID(e))},d=function(e){return s.dispatch(a.actions.setPasted(e))},j=function(e){return s.dispatch(a.actions.setFailed(e))}},603:function(e,t,n){"use strict";(function(e){var c=n(3),r=n.n(c),a=n(44),s=n(148),i=n(24),o=n(0),u=n(70),d=n(350),j=n(351),l=n(608),b=n(1436),f=n(607),O=n(604),h=n(56),p=n(16),x="https://oiekhuylog.execute-api.us-west-2.amazonaws.com/develop",m="aka",g=function(t){var n=e.from(t,"base64").toString();try{return JSON.parse(n)}catch(c){return n}},v=function(e){return[e.signatures[0].protected,e.payload,e.signatures[0].signature].join(".")};t.a=Object(u.b)((function(e){return{did:e.did,username:e.username,failed:e.failed}}))((function(e){var t=e.did,n=e.username,c=e.failed,u=e.ceramic,k=Object(o.useState)(!1),w=Object(i.a)(k,2),y=w[0],C=w[1],S=Object(o.useState)(),P=Object(i.a)(S,2),D=P[0],E=P[1],I=function(){var e=Object(s.a)(r.a.mark((function e(){var c,s,i,o,d,j,l,b,p,k,w,y,S,P,D;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d="".concat(x,"/api/v0/request-github"),console.info(JSON.stringify({did:t,username:n})),e.next=5,fetch(d,{method:"post",body:JSON.stringify({did:t,username:n})});case 5:return j=e.sent,e.next=8,j.json();case 8:if(l=e.sent,b=null===(c=l)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.challengeCode){e.next=12;break}throw new Error("Couldn't generate challenge");case 12:return e.t0=v,e.next=15,u.did.createJWS({challengeCode:b});case 15:return e.t1=e.sent,p=(0,e.t0)(e.t1),d="".concat(x,"/api/v0/confirm-github"),e.next=20,fetch(d,{method:"post",body:JSON.stringify({jws:p})});case 20:return j=e.sent,e.next=23,j.json();case 23:if("error"!==(l=e.sent).status){e.next=26;break}throw new Error(l.message);case 26:if(!(l.status>=300)){e.next=28;break}throw new Error(l.body);case 28:if(k=null===(i=l)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.attestation){e.next=31;break}throw new Error("missing attestation");case 31:return w=null===k||void 0===k?void 0:k.split(".").map(g),y=w[1].vc.credentialSubject.account,S={protocol:"https",host:"github.com",id:y.username,claim:y.url,attestations:[{"did-jwt-vc":k}]},P=new f.a({ceramic:u,aliases:O.a}),e.next=37,P.get(m);case 37:if(e.t2=e.sent,e.t2){e.next=40;break}e.t2={accounts:[]};case 40:if(D=e.t2,console.info("existing",Object(a.a)({},D)),D.accounts){e.next=44;break}throw new Error("malformed ".concat(m," entry"));case 44:return D.accounts.push(S),console.info("new",Object(a.a)({},D)),e.t3=console,e.next=49,P.merge(m,D);case 49:e.t4=e.sent.toUrl(),e.t3.info.call(e.t3,"repo",e.t4),C(!0),e.next=59;break;case 54:e.prev=54,e.t5=e.catch(0),console.error(e.t5),E(e.t5.message),Object(h.c)(!0);case 59:case"end":return e.stop()}}),e,null,[[0,54]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){c||(E(),I())}),[c]),D?Object(p.jsx)(d.a,{children:Object(p.jsxs)(j.a,{status:"error",children:[Object(p.jsx)(j.c,{}),Object(p.jsx)(j.b,{children:D})]})}):y?Object(p.jsx)(d.a,{align:"center",children:Object(p.jsx)(l.a,{children:"Verified"})}):Object(p.jsxs)(d.a,{align:"center",children:[Object(p.jsxs)(l.a,{children:["Verifying gist for ",n,"."]}),Object(p.jsx)("span",{children:" "}),Object(p.jsx)(b.a,{})]})}))}).call(this,n(11).Buffer)},604:function(e){e.exports=JSON.parse('{"a":{"aka":"ceramic://kjzl6cwe1jw145zx6d9m7083a34l92jmue4alyz7yi7z2v3lm7f1a83gd0v9x9t"}}')},620:function(e,t,n){},635:function(e,t){},655:function(e,t){},657:function(e,t){},730:function(e,t){},732:function(e,t){},764:function(e,t){},769:function(e,t){},771:function(e,t){},778:function(e,t){},791:function(e,t){},873:function(e,t){}},[[1431,1,2]]]);
//# sourceMappingURL=main.cbf0acf2.chunk.js.map