(this["webpackJsonpidx-account-linker"]=this["webpackJsonpidx-account-linker"]||[]).push([[0],{1095:function(e,t){},1159:function(e,t){},1211:function(e,t){},1535:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(109),i=n.n(a),s=(n(660),n(75)),o=n(28),u=n(3),d=n.n(u),j=n(158),l=n(621),b=n.n(l),f=n(258),p=n.n(f),h=n(624),O=n.n(h),x=n(367),m=n(1563),g=n(648),v=n(1540),y=n(372),k=n(1564),w=n(1555),C=n(628),S=n.n(C),D=n(60),P=n(17),A=Object(s.b)((function(e){return{address:e.address,did:e.did}}))((function(e){var t=e.address,n=e.setCeramic,r=e.did,a=Object(c.useState)(),i=Object(o.a)(a,2),s=i[0],u=i[1],l={walletconnect:{package:O.a,options:{infuraId:"24eb2385c3514f3d98191ad5e4c903e7"}}},h=new p.a({cacheProvider:!0,providerOptions:l});console.info(Object(f.getInjectedProvider)());var C=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(D.b)(),Object(D.a)(),h.clearCachedProvider(),!(null===s||void 0===s||null===(t=s.currentProvider)||void 0===t?void 0:t.disconnect)){e.next=6;break}return e.next=6,s.currentProvider.disconnect();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(d.a.mark((function e(){var t,c,r,a,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.connect();case 3:return t=e.sent,c=new b.a(t),u(c),e.next=8,c.eth.getAccounts();case 8:return r=e.sent,a=r[0],Object(D.a)(a),i=new x.ThreeIdConnect,e.next=14,i.connect(new x.EthereumAuthProvider(t,a));case 14:return s=new S.a("https://ceramic-clay.3boxlabs.com"),e.next=17,s.setDIDProvider(i.getDidProvider());case 17:n(s),Object(D.b)(s.did.id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error(e.t0),C();case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r||"injected"!==h.cachedProvider){e.next=3;break}return e.next=3,A();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return I()}),[]),t?Object(P.jsxs)(m.a,{align:"center",children:[Object(P.jsxs)(g.a,{children:["Using:",Object(P.jsx)("span",{children:" "}),Object(P.jsxs)("span",{title:t,children:[t.slice(0,10),"\u2026",t.slice(-5)]}),Object(P.jsx)("span",{children:" "}),Object(P.jsx)(w.a,{onClick:C})]}),!r&&Object(P.jsx)(v.a,{})]}):Object(P.jsx)(y.a,{align:"center",children:Object(P.jsx)(k.a,{onClick:A,children:"Connect Your Wallet"})})})),I=n(1556),E=n(1557),q=n(1562),U=Object(s.b)((function(e){return{username:e.username}}))((function(e){var t=e.username,n=Object(c.useState)(t),r=Object(o.a)(n,2),a=r[0],i=r[1];if(t)return Object(P.jsx)(y.a,{children:Object(P.jsx)(I.a,{children:Object(P.jsxs)(g.a,{children:["Checking: ",t,Object(P.jsx)("span",{children:" "}),Object(P.jsx)(w.a,{onClick:function(){return Object(D.e)()}})]})})});return Object(P.jsx)(y.a,{children:Object(P.jsxs)(m.a,{align:"center",children:[Object(P.jsxs)(g.a,{children:["\xbfWhat's your",Object(P.jsx)("span",{children:" "}),Object(P.jsx)(E.a,{target:"_blank",href:"//github.com",children:"Github"}),Object(P.jsx)("span",{children:" "}),"username?"]}),Object(P.jsx)(y.a,{as:"form",onSubmit:function(e){console.info("SUB",a),e.preventDefault(),Object(D.e)(a)},children:Object(P.jsx)(q.a,{textAlign:"center",value:a,onChange:function(e){return i(e.target.value)}})})]})})})),z=n(1558),J=n(1561),L=n(1559),F=Object(s.b)((function(e){return{did:e.did,username:e.username,pasted:e.pasted,failed:e.failed}}))((function(e){var t=e.did,n=e.username,c=e.pasted,r=e.failed,a=Object(z.a)(t).onCopy,i=Object(J.a)();return Object(P.jsx)(y.a,{children:Object(P.jsxs)(m.a,{align:"center",children:[Object(P.jsxs)(g.a,{children:["Copy your DID to a",Object(P.jsx)("span",{children:" "}),Object(P.jsx)(E.a,{target:"_blank",href:"//gist.github.com/".concat(n),children:"gist"}),"."]}),Object(P.jsxs)(g.a,{children:[Object(P.jsxs)("span",{title:t,children:[t.slice(0,10),"\u2026",t.slice(-5)]}),Object(P.jsx)("span",{children:" "}),Object(P.jsx)(L.a,{title:"copy",onClick:function(){a(),i({title:"Copied",status:"success",duration:2e3,isClosable:!0})}})]}),(!c||r)&&Object(P.jsx)(k.a,{onClick:function(){Object(D.d)(!0),Object(D.c)(!1)},background:"green.100",children:"\u2714 Gist Created"})]})})})),N=n(637),B=n(52),T=n(634),W=n(1560),$=Object(s.b)((function(e){return{address:e.address,username:e.username,did:e.did,pasted:e.pasted}}))((function(e){e.address;var t=e.username,n=e.did,r=e.pasted,a=Object(c.useState)(),i=Object(o.a)(a,2),s=i[0],u=i[1],d=[];return d.push(Object(c.createElement)(A,{setCeramic:u,key:1})),n&&(d.push(Object(P.jsx)(U,{},2)),t&&(d.push(Object(P.jsx)(F,{},3)),r&&d.push(Object(c.createElement)(N.a,{ceramic:s,key:4})))),Object(P.jsxs)(B.c,{theme:T.theme,children:[Object(P.jsx)(W.a,{}),Object(P.jsx)(m.a,{align:"center",spacing:5,children:d})]})})),G=function(){return Object(P.jsx)(s.a,{store:D.f,children:Object(P.jsx)($,{})})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1565)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),a(e),i(e)}))};i.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(G,{})}),document.getElementById("root")),K()},60:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return j}));var c=n(48),r=n(371),a=Object(r.b)({name:"page",initialState:{pasted:!1,failed:!1},reducers:{nextPage:function(e){return Object(c.a)(Object(c.a)({},e),{},{step:e.step+1})},lastPage:function(e){return Object(c.a)(Object(c.a)({},e),{},{step:e.step+1})},setAddress:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{address:t.payload})},setUsername:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{username:t.payload})},setDID:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{did:t.payload})},setPasted:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{pasted:t.payload})},setFailed:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{failed:t.payload})}}}),i=Object(r.a)({reducer:a.reducer}),s=function(e){return i.dispatch(a.actions.setAddress(e))},o=function(e){return i.dispatch(a.actions.setUsername(e))},u=function(e){return i.dispatch(a.actions.setDID(e))},d=function(e){return i.dispatch(a.actions.setPasted(e))},j=function(e){return i.dispatch(a.actions.setFailed(e))}},637:function(e,t,n){"use strict";(function(e){var c=n(3),r=n.n(c),a=n(48),i=n(37),s=n(158),o=n(28),u=n(0),d=n(75),j=n(372),l=n(373),b=n(648),f=n(1540),p=n(646),h=n(647),O=n(643),x=n(60),m=n(17),g="https://oiekhuylog.execute-api.us-west-2.amazonaws.com/develop",v="aka",y=function(t){var n=e.from(t,"base64").toString();try{return JSON.parse(n)}catch(c){return n}},k=function(e){return[e.signatures[0].protected,e.payload,e.signatures[0].signature].join(".")};t.a=Object(d.b)((function(e){return{did:e.did,username:e.username,failed:e.failed}}))((function(e){var t=e.did,n=e.username,c=e.failed,d=e.ceramic,w=Object(u.useState)(!1),C=Object(o.a)(w,2),S=C[0],D=C[1],P=Object(u.useState)(),A=Object(o.a)(P,2),I=A[0],E=A[1],q=function(){var e=Object(s.a)(r.a.mark((function e(){var c,s,o,u,j,l,b,f,m,w,C,S,P,A,I,q,U,z;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j="".concat(g,"/api/v0/request-github"),console.info(JSON.stringify({did:t,username:n})),e.next=5,fetch(j,{method:"post",body:JSON.stringify({did:t,username:n})});case 5:return l=e.sent,e.next=8,l.json();case 8:if(b=e.sent,f=null===(c=b)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.challengeCode){e.next=12;break}throw new Error("Couldn't generate challenge");case 12:return e.t0=k,e.next=15,d.did.createJWS({challengeCode:f});case 15:return e.t1=e.sent,m=(0,e.t0)(e.t1),j="".concat(g,"/api/v0/confirm-github"),e.next=20,fetch(j,{method:"post",body:JSON.stringify({jws:m})});case 20:return l=e.sent,e.next=23,l.json();case 23:if("error"!==(b=e.sent).status){e.next=26;break}throw new Error(b.message);case 26:if(!(b.status>=300)){e.next=28;break}throw new Error(b.body);case 28:if(w=null===(o=b)||void 0===o||null===(u=o.data)||void 0===u?void 0:u.attestation){e.next=31;break}throw new Error("missing attestation");case 31:return C=null===w||void 0===w?void 0:w.split(".").map(y),S=C[1].vc.credentialSubject.account,P={protocol:"https",host:"github.com",id:S.username,claim:S.url,attestations:[{"did-jwt-vc":w}]},e.next=36,d.createDocument("tile",{deterministic:!0,content:O});case 36:return A=e.sent,console.info("akaType",{id:A.id.toUrl(),commit:A.commitId.toUrl()}),"ceramic://k6zn3rc3v8qin13uvxmmnn34rp2hiccdt9u2rgqqbg3prksqybhktcs76pzprnd9okf7wf1ijl1cj4rr934ys896vmb11h4uzl0e3zicvc312jfklwd1bam",e.next=41,Object(p.a)(d,{name:"AsKnownAs",description:"Account links to an IDX DID",schema:"ceramic://k6zn3rc3v8qin13uvxmmnn34rp2hiccdt9u2rgqqbg3prksqybhktcs76pzprnd9okf7wf1ijl1cj4rr934ys896vmb11h4uzl0e3zicvc312jfklwd1bam"});case 41:return I=e.sent,console.info("akaDef",{id:I.id.toUrl(),commit:I.commitId.toUrl()}),q=Object(i.a)({},v,[I.id.toUrl()]),U=new h.a({ceramic:d,aliases:q}),e.next=47,U.get(v);case 47:if(e.t2=e.sent,e.t2){e.next=50;break}e.t2={accounts:[]};case 50:if(z=e.t2,console.info("existing",Object(a.a)({},z)),z.accounts){e.next=54;break}throw new Error("malformed ".concat(v," entry"));case 54:return z.accounts.push(P),console.info("new",Object(a.a)({},z)),e.t3=console,e.next=59,U.merge(v,z);case 59:e.t4=e.sent.toUrl(),e.t3.info.call(e.t3,"repo",e.t4),D(!0),e.next=69;break;case 64:e.prev=64,e.t5=e.catch(0),console.error(e.t5),E(e.t5.message),Object(x.c)(!0);case 69:case"end":return e.stop()}}),e,null,[[0,64]])})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){c||(E(),q())}),[c]),I?Object(m.jsx)(j.a,{children:Object(m.jsxs)(l.a,{status:"error",children:[Object(m.jsx)(l.c,{}),Object(m.jsx)(l.b,{children:I})]})}):S?Object(m.jsx)(j.a,{align:"center",children:Object(m.jsx)(b.a,{children:"Verified"})}):Object(m.jsx)(j.a,{align:"center",children:Object(m.jsxs)(b.a,{children:["Verifying gist for ",n,". ",Object(m.jsx)(f.a,{})]})})}))}).call(this,n(12).Buffer)},643:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","title":"AlsoKnownAs","properties":{"accounts":{"type":"array","items":{"$ref":"#/definitions/Account"}}},"definitions":{"Attestation":{"type":"object","properties":{"did-jwt":{"type":"string","maxLength":1000},"did-jwt-vc":{"type":"string","maxLength":1000}}},"Account":{"type":"object","properties":{"protocol":{"type":"string","maxLength":50},"host":{"type":"string","maxLength":150},"id":{"type":"string","maxLength":450},"claim":{"type":"string","maxLength":450},"attestations":{"type":"array","items":{"$ref":"#/definitions/Attestation"}}},"required":["protocol","id"]}}}')},660:function(e,t,n){},675:function(e,t){},695:function(e,t){},697:function(e,t){},770:function(e,t){},772:function(e,t){},804:function(e,t){},809:function(e,t){},811:function(e,t){},818:function(e,t){},831:function(e,t){},913:function(e,t){}},[[1535,1,2]]]);
//# sourceMappingURL=main.90eab50f.chunk.js.map