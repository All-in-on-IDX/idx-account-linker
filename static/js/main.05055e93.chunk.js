(this["webpackJsonpidx-account-linker"]=this["webpackJsonpidx-account-linker"]||[]).push([[0],{1201:function(e,t){},1263:function(e,t){},1315:function(e,t){},1492:function(e){e.exports=JSON.parse("{}")},1495:function(e,t,n){"use strict";n(63),n(11),n(77),n(20)},1501:function(e,t,n){"use strict";n.r(t);var r=n(11),c=n.n(r),s=n(242),a=n.n(s),i=(n(621),n(598)),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1514)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))},u=n(20);a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(i.a,{})}),document.getElementById("root")),o()},249:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","title":"AlsoKnownAs","properties":{"accounts":{"type":"array","items":{"$ref":"#/definitions/Account"}}},"definitions":{"Attestation":{"type":"object","properties":{"did-jwt":{"type":"string","maxLength":1000},"did-jwt-vc":{"type":"string","maxLength":1000}}},"Account":{"type":"object","properties":{"protocol":{"type":"string","maxLength":50},"host":{"type":"string","maxLength":150},"id":{"type":"string","maxLength":450},"claim":{"type":"string","maxLength":450},"attestations":{"type":"array","items":{"$ref":"#/definitions/Attestation"}}},"required":["protocol","id"]}}}')},598:function(e,t,n){"use strict";(function(e){n(2),n(75),n(120),n(245),n(146),n(246),n(11),n(145),n(254),n(102),n(253);var r=n(63),c=(n(249),n(1492),n(612)),s=(n(1495),n(77)),a=n(20);t.a=function(){return Object(a.jsx)(r.a,{store:s.e,children:Object(a.jsx)(c.a,{})})}}).call(this,n(8).Buffer)},611:function(e,t,n){"use strict";(function(e){var r=n(2),c=n.n(r),s=n(75),a=n(120),i=n(41),o=n(11),u=n(63),d=(n(102),n(145),n(352)),j=n(253),b=n(249),f=n(254),l=n(20),h="https://oiekhuylog.execute-api.us-west-2.amazonaws.com/develop",p="aka",O=function(t){var n=e.from(t,"base64").toString();try{return JSON.parse(n)}catch(r){return n}},x=function(e){return[e.signatures[0].protected,e.payload,e.signatures[0].signature].join(".")};t.a=Object(u.b)((function(e){return{did:e.did,username:e.username}}))((function(e){var t=e.did,n=e.username,r=e.ceramic,u=Object(o.useState)(!1),m=Object(i.a)(u,2),g=m[0],v=m[1],y=Object(o.useState)(),w=Object(i.a)(y,2),k=w[0],S=w[1],C=function(){var e=Object(a.a)(c.a.mark((function e(){var a,i,o,u,d,l,m,g,y,w,k,C,D,A,I,P,E,J;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d="".concat(h,"/api/v0/request-github"),e.next=4,fetch(d,{method:"post",body:JSON.stringify({did:t,username:n})});case 4:return l=e.sent,e.next=7,l.json();case 7:if(m=e.sent,g=null===(a=m)||void 0===a||null===(i=a.data)||void 0===i?void 0:i.challengeCode){e.next=11;break}throw new Error("Couldn't generate challenge");case 11:return e.t0=x,e.next=14,r.did.createJWS({challengeCode:g});case 14:return e.t1=e.sent,y=(0,e.t0)(e.t1),d="".concat(h,"/api/v0/confirm-github"),e.next=19,fetch(d,{method:"post",body:JSON.stringify({jws:y})});case 19:return l=e.sent,e.next=22,l.json();case 22:if("error"!==(m=e.sent).status){e.next=25;break}throw new Error(m.message);case 25:if(!(m.status>=300)){e.next=27;break}throw new Error(m.body);case 27:if(w=null===(o=m)||void 0===o||null===(u=o.data)||void 0===u?void 0:u.attestation){e.next=30;break}throw new Error("missing attestation");case 30:return k=null===w||void 0===w?void 0:w.split(".").map(O),C=k[1].vc.credentialSubject.account,D={protocol:"https",host:"github.com",id:C.username,claim:C.url,attestations:[{"did-jwt-vc":w}]},e.next=35,r.createDocument("tile",{deterministic:!0,content:b});case 35:return A=e.sent,e.next=38,Object(j.a)(r,{name:"AsKnownAs",description:"Account links to an IDX DID",schema:A.commitId.toUrl()});case 38:return I=e.sent,P=Object(s.a)({},p,[I.commitId.toUrl()]),E=new f.a({ceramic:r,aliases:P}),e.next=43,E.get(p);case 43:if(e.t2=e.sent,e.t2){e.next=46;break}e.t2={accounts:[]};case 46:if((J=e.t2).accounts){e.next=49;break}throw new Error("malformed ".concat(p," entry"));case 49:return J.accounts.push(D),e.t3=console,e.next=53,E.merge(p,J);case 53:e.t4=e.sent.toString(),e.t3.info.call(e.t3,e.t4),v(!0),e.next=62;break;case 58:e.prev=58,e.t5=e.catch(0),console.error(e.t5),S(e.t5.message);case 62:case"end":return e.stop()}}),e,null,[[0,58]])})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){return C()}),[]),k?Object(l.jsx)(d.a,{children:Object(l.jsxs)("h1",{children:["Error: ",k]})}):g?Object(l.jsx)(d.a,{children:Object(l.jsx)("h1",{children:"Verified"})}):Object(l.jsx)(d.a,{children:Object(l.jsxs)("h1",{children:["Verifying gist for ",n,"."]})})}))}).call(this,n(8).Buffer)},612:function(e,t,n){"use strict";var r=n(41),c=n(63),s=n(11),a=n(2),i=n.n(a),o=n(120),u=n(245),d=n.n(u),j=n(146),b=n.n(j),f=n(246),l=n.n(f),h=n(102),p=n(77),O=n(352),x=n(1513),m=n(145),g=n.n(m),v=n(20),y=Object(c.b)((function(e){return{address:e.address}}))((function(e){var t=e.address,n=e.setCeramic,c=Object(s.useState)(),a=Object(r.a)(c,2),u=a[0],f=a[1],m={walletconnect:{package:l.a,options:{infuraId:"24eb2385c3514f3d98191ad5e4c903e7"}}},y=new b.a({cacheProvider:!0,providerOptions:m});console.info(Object(j.getInjectedProvider)());var w=function(){var e=Object(o.a)(i.a.mark((function e(){var t,r,c,s,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.connect();case 2:return t=e.sent,r=new d.a(t),f(r),e.next=7,r.eth.getAccounts();case 7:return c=e.sent,s=c[0],Object(p.b)(s),a=new h.ThreeIdConnect,e.next=13,a.connect(new h.EthereumAuthProvider(t,s));case 13:return o=new g.a("https://ceramic-clay.3boxlabs.com"),e.next=16,o.setDIDProvider(a.getDidProvider());case 16:n(o),Object(p.c)(o.did.id);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(v.jsxs)("h1",{children:["Using:",Object(v.jsx)("span",{children:" "}),Object(v.jsxs)("span",{title:t,children:[t.slice(0,10),"\u2026",t.slice(-5)]}),Object(v.jsx)(x.a,{onClick:Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(p.b)(),e.t0=null===u||void 0===u||null===(t=u.currentProvider)||void 0===t?void 0:t.disconnect,!e.t0){e.next=5;break}return e.next=5,u.currentProvider.disconnect();case 5:case"end":return e.stop()}}),e)})))})]}):Object(v.jsx)(O.a,{children:Object(v.jsx)("button",{onClick:w,children:"Connect Your Wallet"})})})),w=Object(c.b)((function(e){return{username:e.username}}))((function(e){var t=e.username,n=Object(s.useState)(t),c=Object(r.a)(n,2),a=c[0],i=c[1];if(t)return Object(v.jsx)(O.a,{children:Object(v.jsxs)("h1",{children:["Checking: ",t,Object(v.jsx)(x.a,{onClick:function(){return Object(p.d)()}})]})});return Object(v.jsxs)(O.a,{children:[Object(v.jsxs)("h1",{children:["\xbfWhat's your ",Object(v.jsx)("a",{href:"//github,com",children:"Github"})," username?"]}),Object(v.jsx)("form",{onSubmit:function(e){console.info("SUB",t),e.preventDefault(),Object(p.d)(a)},children:Object(v.jsx)("input",{type:"text",onChange:function(e){return i(e.target.value)}})})]})})),k=Object(c.b)((function(e){return{did:e.did,username:e.username}}))((function(e){var t=e.did,n=e.username;return Object(v.jsxs)(O.a,{children:[Object(v.jsxs)("h1",{children:["Copy your DID to a",Object(v.jsx)("span",{children:" "}),Object(v.jsx)("a",{target:"_blank",href:"//gist.github.com/".concat(n),children:"gist"}),"."]}),Object(v.jsx)("h1",{children:t})]})})),S=n(611);t.a=Object(c.b)((function(e){return{address:e.address,username:e.username,did:e.did}}))((function(e){e.address;var t=e.username,n=e.did,c=Object(s.useState)(),a=Object(r.a)(c,2),i=a[0],o=a[1],u=[];return u.push(Object(v.jsx)(y,{setCeramic:o})),n&&(u.push(Object(v.jsx)(w,{})),t&&(u.push(Object(v.jsx)(k,{})),u.push(Object(v.jsx)(S.a,{ceramic:i})))),u}))},621:function(e,t,n){},632:function(e,t){},652:function(e,t){},654:function(e,t){},727:function(e,t){},729:function(e,t){},761:function(e,t){},766:function(e,t){},768:function(e,t){},77:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n(78),c=n(351),s=Object(c.b)({name:"page",initialState:{step:1,address:null,username:null},reducers:{nextPage:function(e){return Object(r.a)(Object(r.a)({},e),{},{step:e.step+1})},lastPage:function(e){return Object(r.a)(Object(r.a)({},e),{},{step:e.step+1})},setAddress:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{address:t.payload})},setUsername:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{username:t.payload})},setDID:function(e,t){return Object(r.a)(Object(r.a)({},e),{},{did:t.payload})}}}),a=Object(c.a)({reducer:s.reducer}),i=function(){return a.dispatch(s.actions.nextPage())},o=function(e){return a.dispatch(s.actions.setAddress(e))},u=function(e){return a.dispatch(s.actions.setUsername(e))},d=function(e){return a.dispatch(s.actions.setDID(e))}},775:function(e,t){},788:function(e,t){},870:function(e,t){}},[[1501,1,2]]]);
//# sourceMappingURL=main.05055e93.chunk.js.map