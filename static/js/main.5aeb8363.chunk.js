(this["webpackJsonpidx-account-linker"]=this["webpackJsonpidx-account-linker"]||[]).push([[0],{1094:function(e,t){},1158:function(e,t){},1210:function(e,t){},1534:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(108),s=n.n(a),i=(n(659),n(74)),o=n(28),u=n(3),d=n.n(u),j=n(157),l=n(620),b=n.n(l),f=n(360),h=n.n(f),p=n(623),O=n.n(p),x=n(366),m=n(1562),g=n(647),v=n(1540),y=n(371),w=n(1563),k=n(1555),C=n(627),S=n.n(C),D=n(55),A=n(370),P=Object(A.b)({name:"page",initialState:{pasted:!1},reducers:{nextPage:function(e){return Object(D.a)(Object(D.a)({},e),{},{step:e.step+1})},lastPage:function(e){return Object(D.a)(Object(D.a)({},e),{},{step:e.step+1})},setAddress:function(e,t){return Object(D.a)(Object(D.a)({},e),{},{address:t.payload})},setUsername:function(e,t){return Object(D.a)(Object(D.a)({},e),{},{username:t.payload})},setDID:function(e,t){return Object(D.a)(Object(D.a)({},e),{},{did:t.payload})},setPasted:function(e,t){return Object(D.a)(Object(D.a)({},e),{},{pasted:t.payload})}}}),I=Object(A.a)({reducer:P.reducer}),U=function(e){return I.dispatch(P.actions.setAddress(e))},E=function(e){return I.dispatch(P.actions.setUsername(e))},J=function(e){return I.dispatch(P.actions.setDID(e))},L=n(17),N=Object(i.b)((function(e){return{address:e.address,did:e.did}}))((function(e){var t=e.address,n=e.setCeramic,r=e.did,a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],u=s[1],l={walletconnect:{package:O.a,options:{infuraId:"24eb2385c3514f3d98191ad5e4c903e7"}}},f=new h.a({cacheProvider:!0,providerOptions:l}),p=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J(),U(),f.clearCachedProvider(),!(null===i||void 0===i||null===(t=i.currentProvider)||void 0===t?void 0:t.disconnect)){e.next=6;break}return e.next=6,i.currentProvider.disconnect();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(d.a.mark((function e(){var t,c,r,a,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.connect();case 3:return t=e.sent,c=new b.a(t),u(c),e.next=8,c.eth.getAccounts();case 8:return r=e.sent,a=r[0],U(a),s=new x.ThreeIdConnect,e.next=14,s.connect(new x.EthereumAuthProvider(t,a));case 14:return i=new S.a("https://ceramic-clay.3boxlabs.com"),e.next=17,i.setDIDProvider(s.getDidProvider());case 17:n(i),J(i.did.id),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),console.error(e.t0),p();case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r||"injected"!==f.cachedProvider){e.next=3;break}return e.next=3,C();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return D()}),[]),t?Object(L.jsxs)(m.a,{align:"center",children:[Object(L.jsxs)(g.a,{children:["Using:",Object(L.jsx)("span",{children:" "}),Object(L.jsxs)("span",{title:t,children:[t.slice(0,10),"\u2026",t.slice(-5)]}),Object(L.jsx)("span",{children:" "}),Object(L.jsx)(k.a,{onClick:p})]}),!r&&Object(L.jsx)(v.a,{})]}):Object(L.jsx)(y.a,{align:"center",children:Object(L.jsx)(w.a,{onClick:C,children:"Connect Your Wallet"})})})),B=n(1539),F=n(1556),T=n(1561),W=Object(i.b)((function(e){return{username:e.username}}))((function(e){var t=e.username,n=Object(c.useState)(t),r=Object(o.a)(n,2),a=r[0],s=r[1];if(t)return Object(L.jsx)(y.a,{children:Object(L.jsx)(B.a,{children:Object(L.jsxs)(g.a,{children:["Checking: ",t,Object(L.jsx)("span",{children:" "}),Object(L.jsx)(k.a,{onClick:function(){return E()}})]})})});return Object(L.jsx)(y.a,{children:Object(L.jsxs)(m.a,{align:"center",children:[Object(L.jsxs)(g.a,{children:["\xbfWhat's your",Object(L.jsx)("span",{children:" "}),Object(L.jsx)(F.a,{target:"_blank",href:"//github.com",children:"Github"}),Object(L.jsx)("span",{children:" "}),"username?"]}),Object(L.jsx)(y.a,{as:"form",onSubmit:function(e){console.info("SUB",a),e.preventDefault(),E(a)},children:Object(L.jsx)(T.a,{textAlign:"center",value:a,onChange:function(e){return s(e.target.value)}})})]})})})),$=n(1557),q=n(1560),G=n(1558),K=Object(i.b)((function(e){return{did:e.did,username:e.username}}))((function(e){var t=e.did,n=e.username,c=Object($.a)(t).onCopy,r=Object(q.a)();return Object(L.jsx)(y.a,{children:Object(L.jsxs)(m.a,{align:"center",children:[Object(L.jsxs)(g.a,{children:["Copy your DID to a",Object(L.jsx)("span",{children:" "}),Object(L.jsx)(F.a,{target:"_blank",href:"//gist.github.com/".concat(n),children:"gist"}),"."]}),Object(L.jsxs)(g.a,{children:[Object(L.jsxs)("span",{title:t,children:[t.slice(0,10),"\u2026",t.slice(-5)]}),Object(L.jsx)("span",{children:" "}),Object(L.jsx)(G.a,{title:"copy",onClick:function(){c(),r({title:"Copied",status:"success",duration:2e3,isClosable:!0})}})]}),Object(L.jsx)(w.a,{onClick:function(){return e=!0,I.dispatch(P.actions.setPasted(e));var e},background:"green.100",children:"\u2714 Gist Created"})]})})})),V=n(636),_=n(51),z=n(633),M=n(1559),X=Object(i.b)((function(e){return{address:e.address,username:e.username,did:e.did,pasted:e.pasted}}))((function(e){e.address;var t=e.username,n=e.did,r=e.pasted,a=Object(c.useState)(),s=Object(o.a)(a,2),i=s[0],u=s[1],d=[];return d.push(Object(L.jsx)(N,{setCeramic:u})),n&&(d.push(Object(L.jsx)(W,{})),t&&(d.push(Object(L.jsx)(K,{})),r&&d.push(Object(L.jsx)(V.a,{ceramic:i})))),Object(L.jsxs)(_.c,{theme:z.theme,children:[Object(L.jsx)(M.a,{}),Object(L.jsx)(m.a,{align:"center",spacing:5,children:d})]})})),Y=function(){return Object(L.jsx)(i.a,{store:I,children:Object(L.jsx)(X,{})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1564)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(Y,{})}),document.getElementById("root")),H()},636:function(e,t,n){"use strict";(function(e){var c=n(3),r=n.n(c),a=n(55),s=n(37),i=n(157),o=n(28),u=n(0),d=n(74),j=n(371),l=n(372),b=n(647),f=n(1540),h=n(1539),p=n(645),O=n(641),x=n(646),m=n(17),g="https://oiekhuylog.execute-api.us-west-2.amazonaws.com/develop",v="aka",y=function(t){var n=e.from(t,"base64").toString();try{return JSON.parse(n)}catch(c){return n}},w=function(e){return[e.signatures[0].protected,e.payload,e.signatures[0].signature].join(".")};t.a=Object(d.b)((function(e){return{did:e.did,username:e.username}}))((function(e){var t=e.did,n=e.username,c=e.ceramic,d=Object(u.useState)(!1),k=Object(o.a)(d,2),C=k[0],S=k[1],D=Object(u.useState)(),A=Object(o.a)(D,2),P=A[0],I=A[1],U=function(){var e=Object(i.a)(r.a.mark((function e(){var i,o,u,d,j,l,b,f,h,m,k,C,D,A,P,U,E,J;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,j="".concat(g,"/api/v0/request-github"),console.info(JSON.stringify({did:t,username:n})),e.next=5,fetch(j,{method:"post",body:JSON.stringify({did:t,username:n})});case 5:return l=e.sent,e.next=8,l.json();case 8:if(b=e.sent,f=null===(i=b)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.challengeCode){e.next=12;break}throw new Error("Couldn't generate challenge");case 12:return e.t0=w,e.next=15,c.did.createJWS({challengeCode:f});case 15:return e.t1=e.sent,h=(0,e.t0)(e.t1),j="".concat(g,"/api/v0/confirm-github"),e.next=20,fetch(j,{method:"post",body:JSON.stringify({jws:h})});case 20:return l=e.sent,e.next=23,l.json();case 23:if("error"!==(b=e.sent).status){e.next=26;break}throw new Error(b.message);case 26:if(!(b.status>=300)){e.next=28;break}throw new Error(b.body);case 28:if(m=null===(u=b)||void 0===u||null===(d=u.data)||void 0===d?void 0:d.attestation){e.next=31;break}throw new Error("missing attestation");case 31:return k=null===m||void 0===m?void 0:m.split(".").map(y),C=k[1].vc.credentialSubject.account,D={protocol:"https",host:"github.com",id:C.username,claim:C.url,attestations:[{"did-jwt-vc":m}]},e.next=36,c.createDocument("tile",{deterministic:!0,content:O});case 36:return A=e.sent,console.info("akaType",{id:A.id.toUrl(),commit:A.commitId.toUrl()}),e.next=40,Object(p.a)(c,{name:"AsKnownAs",description:"Account links to an IDX DID",schema:A.commitId.toUrl()});case 40:return P=e.sent,console.info("akaDef",{id:P.id.toUrl(),commit:P.commitId.toUrl()}),U=Object(s.a)({},v,[P.id.toUrl()]),E=new x.a({ceramic:c,aliases:U}),e.next=46,E.get(v);case 46:if(e.t2=e.sent,e.t2){e.next=49;break}e.t2={accounts:[]};case 49:if(J=e.t2,console.info("existing",Object(a.a)({},J)),J.accounts){e.next=53;break}throw new Error("malformed ".concat(v," entry"));case 53:return J.accounts.push(D),console.info("new",Object(a.a)({},J)),e.t3=console,e.next=58,E.merge(v,J);case 58:e.t4=e.sent.toUrl(),e.t3.info.call(e.t3,"repo",e.t4),S(!0),e.next=67;break;case 63:e.prev=63,e.t5=e.catch(0),console.error(e.t5),I(e.t5.message);case 67:case"end":return e.stop()}}),e,null,[[0,63]])})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){return U()}),[]),P?Object(m.jsx)(j.a,{children:Object(m.jsxs)(l.a,{status:"error",children:[Object(m.jsx)(l.c,{}),Object(m.jsx)(l.b,{children:P})]})}):C?Object(m.jsx)(j.a,{children:Object(m.jsx)(h.a,{children:Object(m.jsx)(b.a,{children:"Verified"})})}):Object(m.jsx)(j.a,{align:"center",children:Object(m.jsxs)(b.a,{children:["Verifying gist for ",n,". ",Object(m.jsx)(f.a,{})]})})}))}).call(this,n(12).Buffer)},641:function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","type":"object","title":"AlsoKnownAs","properties":{"accounts":{"type":"array","items":{"$ref":"#/definitions/Account"}}},"definitions":{"Attestation":{"type":"object","properties":{"did-jwt":{"type":"string","maxLength":1000},"did-jwt-vc":{"type":"string","maxLength":1000}}},"Account":{"type":"object","properties":{"protocol":{"type":"string","maxLength":50},"host":{"type":"string","maxLength":150},"id":{"type":"string","maxLength":450},"claim":{"type":"string","maxLength":450},"attestations":{"type":"array","items":{"$ref":"#/definitions/Attestation"}}},"required":["protocol","id"]}}}')},659:function(e,t,n){},674:function(e,t){},694:function(e,t){},696:function(e,t){},769:function(e,t){},771:function(e,t){},803:function(e,t){},808:function(e,t){},810:function(e,t){},817:function(e,t){},830:function(e,t){},912:function(e,t){}},[[1534,1,2]]]);
//# sourceMappingURL=main.5aeb8363.chunk.js.map